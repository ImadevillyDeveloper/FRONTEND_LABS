<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Портфолио</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a class="orange_underlined" href="#section1">ОБО МНЕ</a></li>
                <li><a class="orange_underlined" href="#section2">УВЛЕЧЕНИЯ</a></li>
                <li><a class="orange_underlined" href="#section3">О МАРШРУТЕ</a></li>
                <li><a class="orange_underlined" href="#section4">УПРАВЛЕНИЕ ДАННЫМИ</a></li>
                <li><a class="orange_underlined" href="#section5">ИСТОРИЯ</a></li>
            </ul>
        </nav>
    </header>
    <section id="section1">
        <h1 class="orange_highlight">HELLO, WORLD!</h1>
        <div class="about__content">
            <img class="img_main"
                src="./images/ava.JPG"
                alt=""
            />
            <div class="intro-text">
                <p class="brown intro-line">Вас приветствует</p>
                <p class="brown_crossed intro-line">гениальный программист</p>
                <p class="brown intro-line">младший администратор <span class="bold-text">212 маршрута "СТЦ Мега - пос. Чкаловский"</span>!</p>
            </div>
        </div>
        <div class="brown2">
            <a>Транспортом я увлекаюсь уже больше двух лет, и меня знают на многих маршрутах города как транспортного энтузиаста и лучшего штурмана! А ещё я мечтаю не просто помогать в организации работы маршрута, но стать одним из его водителей.</a>
            <p>Моя любимая цитата: "Ваша работа заполнит большую часть жизни и единственный способ быть полностью довольным — делать то, что по-вашему является великим делом.
            И единственный способ делать великие дела — любить то, что вы делаете!" — Стив Джобс, <cite>Речь в Стенфорде</cite></p>
            <p>Девиз нашего маршрута: "Дорогу осилит едущий!"</a></p>
            <p>
                <a class="social-link1" href="https://t.me/+sqIPcxR1DeU4M2My">ТГ-канал</a><a class="highlight"> | </a><a class="social-link" href="mailto:imadevillydeveloper@gmail.com">Email</a><a class="highlight"> | </a><a class="social-link" href="tel:89136737965">Телефон</a>
            </p>
            <hr style="opacity: 0;">
        </div>
    </section>
    <section id="section2">
        <h1 class="orange_highlight">Увлечения:</h1>
        <ol class="brown">
            <li><h3 class="orange_underlined">МАРШРУТ 212</h3></li>
            <img class="centered_image"
                src="./images/2.jpg"
                width="350"
                height="241" />
            <img
                src="./images/3.jpg"
                width="350"
                height="241" />
            <img
                src="./images/1.jpg"
                width="350"
                height="241" />
            <img
                src="./images/4.jpg"
                width="350"
                height="241" />
            <p>Вот такую инфографику я разработала специально для "двенашек".</p>
            <p>А ещё я - лучший и единственный штурман на маршруте. Все конкуренты под моим полным контролем, и наши "двенашки" (почти) всегда приходят первыми!</p>
            <li><h3 class="orange_underlined">ПРОГРАММИРОВАНИЕ</h3></li>
            <p>Тут похвастаться мне нечем. Даже своего компа у меня нет...</p>
            <li><h3 class="orange_underlined">ENGLISH</h3></li>
            <p>Изучением английского языка я занимаюсь с детства, и он гораздо легче всех языков программирования!</p>
        </ol>
        <hr style="opacity: 0;">
    </section>
    <section id="section3">
        <h2 class="orange_highlight">Машины 212 маршрута:</h2>
        <div class="brown_table">
        <table id="transportTable">
            <thead>
                <tr>
                    <th>Критерий</th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th>6</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ГОСНОМЕР</td>
                    <td>У321НТ55</td>
                    <td>У671НН55</td>
                    <td>У144НЕ55</td>
                    <td>Х264МР55</td>
                    <td>У053ЕА55</td>
                    <td>У212СУ55</td>
                </tr>
                <tr>
                    <td>МОДЕЛЬ</td>
                    <td>ПАЗ-320405-14</td>
                    <td>ПАЗ-320405-14</td>
                    <td>ПАЗ-320405-14</td>
                    <td>ПАЗ-320405-14</td>
                    <td>ПАЗ-320412-14</td>
                    <td>ПАЗ-320405-14</td>
                </tr>
                <tr>
                    <td>БОРТОВОЙ НОМЕР</td>
                    <td>№ 7928</td>
                    <td>№ 7929</td>
                    <td>№ 7930</td>
                    <td>№ 7932</td>
                    <td>№ 7931</td>
                    <td>отсутствует</td>
                </tr>
                <tr>
                    <td>СОСТОЯНИЕ</td>
                    <td>В работе</td>
                    <td>В работе</td>
                    <td>В работе</td>
                    <td>В работе</td>
                    <td>Ремонт</td>
                    <td>Плановое ТО</td>
                </tr>
                <tr>
                    <td>ФОТО</td>
                    <td>
                        <img
                    src="./images/321.jpg"
                    width=100% />
                    </td>
                    <td>
                        <img
                    src="./images/671.jpg"
                    width=100% />
                    </td>
                    <td>
                        <img
                    src="./images/144.jpg"
                    width=100% />
                    </td>
                    <td>
                        <img
                    src="./images/264.jpg"
                    width=100% />
                    </td>
                    <td>
                        <img
                    src="./images/053.jpg"
                    width=100% />
                    </td>
                    <td>
                        <img
                    src="./images/212.jpg"
                    width=100% />
                    </td>
                </tr>
            </tbody>
        </table>
        </div>
    </section>

    <!-- ЗАДАНИЕ 1: Форма для управления данными -->
    <section id="section4">
        <h2 class="orange_highlight">Управление данными о ТС маршрута</h2>
        
        <div class="form-container">
            <h3>Добавить новое ТС</h3>
            
            <form id="transportForm">
                <div class="form-group">
                    <label for="gosnumber">Госномер:</label>
                    <input type="text" id="gosnumber" name="gosnumber">
                    <div class="error-message" id="gosnumber-error">Это поле обязательно для заполнения</div>
                </div>
                
                <div class="form-group">
                    <label for="model">Модель:</label>
                    <input type="text" id="model" name="model">
                    <div class="error-message" id="model-error">Это поле обязательно для заполнения</div>
                </div>
                
                <div class="form-group">
                    <label for="bortnumber">Бортовой номер:</label>
                    <input type="text" id="bortnumber" name="bortnumber">
                    <div class="error-message" id="bortnumber-error">Это поле обязательно для заполнения</div>
                </div>
                
                <div class="form-group">
                    <label for="condition">Состояние:</label>
                    <input type="text" id="condition" name="condition" placeholder="В работе, Ремонт, ТО и т.д.">
                    <div class="error-message" id="condition-error">Это поле обязательно для заполнения</div>
                </div>
                
                <div class="form-group">
                    <label for="photo">Ссылка на фото:</label>
                    <input type="text" id="photo" name="photo" placeholder="URL изображения">
                    <div class="error-message" id="photo-error">Это поле обязательно для заполнения</div>
                </div>
                
                <div class="form-buttons">
                    <button type="submit" id="addBtn">Добавить машину</button>
                    <button type="button" id="clearBtn" class="secondary">Очистить форму</button>
                </div>
            </form>
        </div>
        
        <div style="margin-top: 40px;">
            <h3>Список ТС 212 маршрута</h3>
            <table id="dynamicTable">
                <thead>
                    <tr>
                        <th>Госномер</th>
                        <th>Модель</th>
                        <th>Бортовой номер</th>
                        <th>Состояние</th>
                        <th>Фото</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Строки будут добавляться динамически -->
                </tbody>
            </table>
        </div>
    </section>

    <!-- ЗАДАНИЕ 2: Слайдер -->
    <section id="section5">
        <h2 class="orange_highlight">История нашего 212 маршрута</h2>
        
        <div class="slider-container">
            <div class="slider" id="slider">
                <div class="slide slide-1">
                    <div class="slide-content">
                        <h3>Начало пути</h3>
                        <p>Маршрут №212 был запущен в 2013 году, соединив торговый центр "Мега" с посёлком Чкаловский.</p>
                        <img src="./images/m.jpg" alt="История маршрута 1">
                    </div>
                </div>
                <div class="slide slide-2">
                    <div class="slide-content">
                        <h3>Развитие маршрута</h3>
                        <p>В течение 12 лет на маршруте работали микроавтобусы "Ford Transit". В последние годы маршрут был убран из Центра из-за машин малого класса вместимости.</p>
                        <img src="./images/ford.jpg" alt="История маршрута 2">
                    </div>
                </div>
                <div class="slide slide-3">
                    <div class="slide-content">
                        <h3>Обновление парка</h3>
                        <p>27 декабря 2024 года парк машин был полностью обновлён. Маршрут, обслуживаемый автобусами среднего класса вместимости "ПАЗ Vector 320412-14 | Vector Next 320405-14", вернулся в Центр.</p>
                        <img src="./images/212.jpg" alt="История маршрута 3">
                    </div>
                </div>
                <div class="slide slide-4">
                    <div class="slide-content">
                        <h3>Планы на будущее</h3>
                        <p>В планах - увеличение количества транспортных единиц и обновление автопарка.</p>
                        <img src="./images/logo.jpg" alt="История маршрута 4">
                    </div>
                </div>
            </div>
            
            <div class="slider-nav">
                <button class="slider-btn" id="prevBtn">‹</button>
                <button class="slider-btn" id="nextBtn">›</button>
            </div>
        </div>
    </section>

    <script>
        // ================== ЗАДАНИЕ 1: Управление данными таблицы ==================
        
        // Инициализация данных из localStorage
        let transportData = JSON.parse(localStorage.getItem('transportData')) || [];
        
        // Функция для сохранения данных в localStorage
        function saveData() {
            localStorage.setItem('transportData', JSON.stringify(transportData));
        }
        
        // Функция для загрузки данных при старте
        function loadData() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            // Добавляем исходные данные из первой таблицы
            const originalTable = document.getElementById('transportTable');
            const rows = originalTable.querySelectorAll('tbody tr');
            
            // Первая строка - госномера
            const gosnumbers = Array.from(rows[0].querySelectorAll('td')).slice(1).map(td => td.textContent);
            
            // Вторая строка - модели
            const models = Array.from(rows[1].querySelectorAll('td')).slice(1).map(td => td.textContent);
            
            // Третья строка - бортовые номера
            const bortnumbers = Array.from(rows[2].querySelectorAll('td')).slice(1).map(td => td.textContent);
            
            // Четвертая строка - состояния
            const conditions = Array.from(rows[3].querySelectorAll('td')).slice(1).map(td => td.textContent);
            
            // Пятая строка - фото
            const photos = Array.from(rows[4].querySelectorAll('td')).slice(1).map(td => {
                const img = td.querySelector('img');
                return img ? img.src : '';
            });
            
            // Добавляем исходные данные в массив, если их еще нет
            if (transportData.length === 0) {
                for (let i = 0; i < gosnumbers.length; i++) {
                    transportData.push({
                        id: Date.now() + i,
                        gosnumber: gosnumbers[i],
                        model: models[i],
                        bortnumber: bortnumbers[i],
                        condition: conditions[i],
                        photo: photos[i]
                    });
                }
                saveData();
            }
            
            // Отображаем все данные
            renderTable();
        }
        
        // Функция для отображения таблицы
        function renderTable() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            transportData.forEach((item, index) => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${item.gosnumber}</td>
                    <td>${item.model}</td>
                    <td>${item.bortnumber}</td>
                    <td>${item.condition}</td>
                    <td><img src="${item.photo}" alt="Фото" style="max-width: 100px; height: auto;"></td>
                    <td><button class="delete-btn" data-id="${item.id}">Удалить</button></td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Добавляем обработчики событий для кнопок удаления
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    deleteRow(id);
                });
            });
        }
        
        // Функция для удаления строки
        function deleteRow(id) {
            transportData = transportData.filter(item => item.id !== id);
            saveData();
            renderTable();
        }
        
        // Функция для добавления новой строки
        function addRow(data) {
            const newItem = {
                id: Date.now(),
                ...data
            };
            
            transportData.push(newItem);
            saveData();
            renderTable();
        }
        
        // Функции валидации
        function validateForm() {
            let isValid = true;
            const form = document.getElementById('transportForm');
            const inputs = form.querySelectorAll('input');
            
            // Сначала скрываем все сообщения об ошибках
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.style.display = 'none';
            });
            
            // Убираем класс ошибок со всех полей
            inputs.forEach(input => {
                input.classList.remove('error');
            });
            
            // Проверка на пустые поля
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                    document.getElementById(`${input.id}-error`).style.display = 'block';
                }
            });
            
            return isValid;
        }
        
        // Обработчик отправки формы
        document.getElementById('transportForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (validateForm()) {
                const formData = {
                    gosnumber: document.getElementById('gosnumber').value.trim(),
                    model: document.getElementById('model').value.trim(),
                    bortnumber: document.getElementById('bortnumber').value.trim(),
                    condition: document.getElementById('condition').value.trim(),
                    photo: document.getElementById('photo').value.trim()
                };
                
                addRow(formData);
                
                // Очищаем форму
                this.reset();
                
                // Прокручиваем к таблице
                document.getElementById('dynamicTable').scrollIntoView({behavior: 'smooth'});
            }
        });
        
        // Обработчик кнопки очистки формы
        document.getElementById('clearBtn').addEventListener('click', function() {
            document.getElementById('transportForm').reset();
            
            // Скрываем сообщения об ошибках
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.style.display = 'none';
            });
            
            // Убираем класс ошибок
            document.querySelectorAll('input').forEach(input => {
                input.classList.remove('error');
            });
        });
        
        // ================== ЗАДАНИЕ 2: Слайдер ==================
        
        let currentSlide = 0;
        let slideInterval;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const slider = document.getElementById('slider');
        
        // Инициализация слайдера
        function initSlider() {
            updateSlider();
            startAutoSlide();
        }
        
        // Обновление позиции слайдера
        function updateSlider() {
            slider.style.transform = `translateX(-${currentSlide * 100}%)`;
        }
        
        // Переход к следующему слайду
        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateSlider();
        }
        
        // Переход к предыдущему слайду
        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateSlider();
        }
        
        // Запуск автоматического переключения
        function startAutoSlide() {
            slideInterval = setInterval(nextSlide, 5000);
        }
        
        // Остановка автоматического переключения
        function stopAutoSlide() {
            clearInterval(slideInterval);
        }
        
        // Обработчики событий для кнопок слайдера
        document.getElementById('nextBtn').addEventListener('click', function() {
            nextSlide();
            stopAutoSlide();
            startAutoSlide();
        });
        
        document.getElementById('prevBtn').addEventListener('click', function() {
            prevSlide();
            stopAutoSlide();
            startAutoSlide();
        });
        
        // Остановка авто-переключения при наведении мыши
        document.querySelector('.slider-container').addEventListener('mouseenter', stopAutoSlide);
        document.querySelector('.slider-container').addEventListener('mouseleave', startAutoSlide);
        
        // ================== ИНИЦИАЛИЗАЦИЯ ПРИ ЗАГРУЗКЕ СТРАНИЦЫ ==================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Загружаем данные для задания 1
            loadData();
            
            // Инициализируем слайдер для задания 2
            initSlider();
        });
    </script>
</body>
</html>